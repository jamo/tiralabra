\documentclass[a4paper,12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{url}
\setlength{\parindent}{0.0cm}


\begin{document}
\title{TiRa labra - Testausdokumentti} 
\author{Jarmo Isotalo}
\maketitle

\section{Testausdokumentti}

\subsection{Mitä on testattu?}
Testit testaavat irrallisesti oleellisimmat (d-)keon metodit. Lisäksi testaavat kekojen järjestykseen liittyviä ominaisuuksia. Eli testit lisäävät kekoon N kpl Satunnaisia arvoja väliltä 0-1000 ja poistavat ne sen jälkeen. Testit tarkistavat että arvot tulevat suuruusjärjestyksessä.\\

Testit on toteutettu rspec-ohjelmalla ajettaviksi.

\subsection{Testien ajaminen}
Testit voidaan suorittaa kansiossa  \emph{heap/Heap/} suorittamalla komennon \emph{rspec spec/}. Tämä ajaa kaikki testit ja raportoi mahdollisista virheistä komentorivi käyttöliittymäänsä.
Testien ajaminen päivittää joka kerralla koodin testien kattavuuden laskennan. 

Testien kattavuuden näkee tiedostosta: 
\emph{heaps/Heap/src/doc/index.html} 


\subsection{Benchmark}
Kekojen toimintaa voi benchmarkata suorittamalla \emph{heaps/Heap/benchmark/} kansiossa olevan \emph{my\_benchmark\_spec.rb}  tiedoston.

Esimerkiksi kansiossa \emph{heaps/Heap/} ollessa komentorivillä \emph{rspec benchmark/}

Tämä tulostaa seuraavanlaisen kaavion:
Kaaviosta puuttu ääkköset ohjelmien yhteensopivuuden parantamiseksi.
\newpage
\scriptsize
\begin{verbatim}

                            user     system      total        real
Binaarikeko 100:lla     0.000000   0.000000   0.000000 (  0.004709)
Kolmikeko 100:lla       0.000000   0.000000   0.000000 (  0.007422)
D-keko 10 100:lla       0.010000   0.000000   0.010000 (  0.006508)
Binaarikeko 30000:lla   5.210000   0.010000   5.220000 (  5.234069)
Kolmikeko 30000:lla     4.030000   0.010000   4.040000 (  4.056050)
D-keko 10 30000:lla     6.670000   0.110000   6.780000 (  6.803153)
DHeap 1 5000:lla        0.830000   0.010000   0.840000 (  0.838467)
DHeap 2 5000:lla        0.830000   0.010000   0.840000 (  0.843472)
DHeap 3 5000:lla        0.850000   0.020000   0.870000 (  0.866141)
DHeap 4 5000:lla        0.850000   0.010000   0.860000 (  0.864744)
DHeap 5 5000:lla        0.840000   0.020000   0.860000 (  0.853218)
DHeap 6 5000:lla        0.800000   0.010000   0.810000 (  0.817996)
DHeap 7 5000:lla        0.890000   0.010000   0.900000 (  0.908163)
DHeap 8 5000:lla        0.840000   0.020000   0.860000 (  0.861509)
DHeap 9 5000:lla        0.820000   0.010000   0.830000 (  0.828485)
DHeap 10 5000:lla       0.820000   0.020000   0.840000 (  0.836274)
DHeap 11 5000:lla       0.840000   0.010000   0.850000 (  0.856567)
DHeap 12 5000:lla       0.830000   0.010000   0.840000 (  0.842220)
DHeap 13 5000:lla       0.830000   0.020000   0.850000 (  0.853688)
DHeap 14 5000:lla       0.850000   0.010000   0.860000 (  0.865884)
DHeap 15 5000:lla       0.860000   0.020000   0.880000 (  0.874780)
DHeap 16 5000:lla       0.840000   0.010000   0.850000 (  0.853455)
DHeap 17 5000:lla       0.810000   0.010000   0.820000 (  0.832128)
DHeap 18 5000:lla       0.850000   0.020000   0.870000 (  0.862678)
DHeap 19 5000:lla       0.820000   0.010000   0.830000 (  0.836733)
DHeap 20 5000:lla       0.830000   0.010000   0.840000 (  0.839785)
DHeap 21 5000:lla       0.840000   0.010000   0.850000 (  0.859595)
DHeap 22 5000:lla       0.850000   0.010000   0.860000 (  0.860584)
DHeap 23 5000:lla       0.800000   0.020000   0.820000 (  0.820773)
DHeap 24 5000:lla       0.830000   0.010000   0.840000 (  0.840305)
DHeap 25 5000:lla       0.840000   0.010000   0.850000 (  0.849989)
DHeap 26 5000:lla       0.880000   0.020000   0.900000 (  0.895057)
DHeap 27 5000:lla       0.810000   0.010000   0.820000 (  0.827964)
DHeap 28 5000:lla       0.850000   0.020000   0.870000 (  0.858100)
DHeap 29 5000:lla       0.850000   0.010000   0.860000 (  0.864358)
DHeap 30 5000:lla       0.830000   0.010000   0.840000 (  0.844840)
DHeap 31 5000:lla       0.850000   0.020000   0.870000 (  0.872152)
DHeap 32 5000:lla       0.850000   0.010000   0.860000 (  0.862652)
DHeap 33 5000:lla       0.840000   0.010000   0.850000 (  0.854885)
DHeap 34 5000:lla       0.810000   0.020000   0.830000 (  0.828793)
DHeap 35 5000:lla       0.830000   0.010000   0.840000 (  0.843684)
DHeap 36 5000:lla       0.800000   0.010000   0.810000 (  0.813543)
DHeap 37 5000:lla       0.900000   0.010000   0.910000 (  0.913240)
DHeap 38 5000:lla       0.810000   0.010000   0.820000 (  0.831361)
DHeap 39 5000:lla       0.800000   0.020000   0.820000 (  0.818517)
DHeap 40 5000:lla       0.880000   0.010000   0.890000 (  0.898289)
DHeap 41 5000:lla       0.800000   0.010000   0.810000 (  0.811138)
DHeap 42 5000:lla       0.790000   0.020000   0.810000 (  0.802666)
DHeap 43 5000:lla       0.830000   0.010000   0.840000 (  0.846697)
DHeap 44 5000:lla       0.870000   0.010000   0.880000 (  0.886917)
DHeap 45 5000:lla       0.830000   0.020000   0.850000 (  0.851488)
DHeap 46 5000:lla       0.820000   0.010000   0.830000 (  0.824723)
DHeap 47 5000:lla       0.860000   0.020000   0.880000 (  0.875667)
DHeap 48 5000:lla       0.870000   0.010000   0.880000 (  0.878668)
DHeap 49 5000:lla       0.860000   0.010000   0.870000 (  0.877464)
DHeap 50 5000:lla       0.810000   0.020000   0.830000 (  0.824955)
\end{verbatim} 
\normalsize
Alun testissä  D-keon D oli 10. Alla on testattu D-keon D koon vaikutus operaatioiden nopeuteen. Alimmissa benchmarkeissa on lisätty 5000 satunnasta kokonaislukua D-kekoon.

Testit on ajettu i7 mac book prolla.
\newpage
Vastaavat testit suoritettuna jrubyllä.

\scriptsize
\begin{verbatim}

                            user     system      total        real
Binaarikeko 100:lla     0.004000   0.000000   0.004000 (  0.004000)
Kolmikeko 100:lla       0.002000   0.000000   0.002000 (  0.002000)
D-keko 10 100:lla       0.002000   0.000000   0.002000 (  0.002000)
Binaarikeko 30000:lla   1.490000   0.000000   1.490000 (  1.490000)
Kolmikeko 30000:lla     1.100000   0.000000   1.100000 (  1.100000)
D-keko 10 30000:lla     1.262000   0.000000   1.262000 (  1.262000)
DHeap 1 5000:lla        0.157000   0.000000   0.157000 (  0.157000)
DHeap 2 5000:lla        0.155000   0.000000   0.155000 (  0.155000)
DHeap 3 5000:lla        0.156000   0.000000   0.156000 (  0.156000)
DHeap 4 5000:lla        0.176000   0.000000   0.176000 (  0.176000)
DHeap 5 5000:lla        0.173000   0.000000   0.173000 (  0.173000)
DHeap 6 5000:lla        0.153000   0.000000   0.153000 (  0.153000)
DHeap 7 5000:lla        0.186000   0.000000   0.186000 (  0.186000)
DHeap 8 5000:lla        0.166000   0.000000   0.166000 (  0.166000)
DHeap 9 5000:lla        0.156000   0.000000   0.156000 (  0.156000)
DHeap 10 5000:lla       0.155000   0.000000   0.155000 (  0.155000)
DHeap 11 5000:lla       0.153000   0.000000   0.153000 (  0.153000)
DHeap 12 5000:lla       0.154000   0.000000   0.154000 (  0.154000)
DHeap 13 5000:lla       0.161000   0.000000   0.161000 (  0.161000)
DHeap 14 5000:lla       0.159000   0.000000   0.159000 (  0.158000)
DHeap 15 5000:lla       0.184000   0.000000   0.184000 (  0.184000)
DHeap 16 5000:lla       0.172000   0.000000   0.172000 (  0.172000)
DHeap 17 5000:lla       0.153000   0.000000   0.153000 (  0.153000)
DHeap 18 5000:lla       0.160000   0.000000   0.160000 (  0.160000)
DHeap 19 5000:lla       0.156000   0.000000   0.156000 (  0.156000)
DHeap 20 5000:lla       0.154000   0.000000   0.154000 (  0.154000)
DHeap 21 5000:lla       0.157000   0.000000   0.157000 (  0.157000)
DHeap 22 5000:lla       0.153000   0.000000   0.153000 (  0.153000)
DHeap 23 5000:lla       0.152000   0.000000   0.152000 (  0.152000)
DHeap 24 5000:lla       0.158000   0.000000   0.158000 (  0.158000)
DHeap 25 5000:lla       0.159000   0.000000   0.159000 (  0.160000)
DHeap 26 5000:lla       0.156000   0.000000   0.156000 (  0.156000)
DHeap 27 5000:lla       0.161000   0.000000   0.161000 (  0.161000)
DHeap 28 5000:lla       0.160000   0.000000   0.160000 (  0.160000)
DHeap 29 5000:lla       0.168000   0.000000   0.168000 (  0.168000)
DHeap 30 5000:lla       0.155000   0.000000   0.155000 (  0.155000)
DHeap 31 5000:lla       0.160000   0.000000   0.160000 (  0.160000)
DHeap 32 5000:lla       0.213000   0.000000   0.213000 (  0.212000)
DHeap 33 5000:lla       0.158000   0.000000   0.158000 (  0.158000)
DHeap 34 5000:lla       0.163000   0.000000   0.163000 (  0.163000)
DHeap 35 5000:lla       0.205000   0.000000   0.205000 (  0.205000)
DHeap 36 5000:lla       0.158000   0.000000   0.158000 (  0.158000)
DHeap 37 5000:lla       0.157000   0.000000   0.157000 (  0.157000)
DHeap 38 5000:lla       0.158000   0.000000   0.158000 (  0.158000)
DHeap 39 5000:lla       0.161000   0.000000   0.161000 (  0.161000)
DHeap 40 5000:lla       0.155000   0.000000   0.155000 (  0.155000)
DHeap 41 5000:lla       0.158000   0.000000   0.158000 (  0.158000)
DHeap 42 5000:lla       0.160000   0.000000   0.160000 (  0.160000)
DHeap 43 5000:lla       0.227000   0.000000   0.227000 (  0.227000)
DHeap 44 5000:lla       0.187000   0.000000   0.187000 (  0.187000)
DHeap 45 5000:lla       0.155000   0.000000   0.155000 (  0.155000)
DHeap 46 5000:lla       0.158000   0.000000   0.158000 (  0.158000)
DHeap 47 5000:lla       0.160000   0.000000   0.160000 (  0.160000)
DHeap 48 5000:lla       0.162000   0.000000   0.162000 (  0.162000)
DHeap 49 5000:lla       0.155000   0.000000   0.155000 (  0.155000)
DHeap 50 5000:lla       0.157000   0.000000   0.157000 (  0.157000)
\end{verbatim}
\normalsize
Ja jotta rspec toimisi jrubyllä oikein, tulee rspec ajaa seuraavalla komennolla: \emph{ruby --1.9 -S rspec benchmark/}

\subsection{Dokumentaation generointi}
Rdoc dokumentaation saa generoituta komennolla \emph{rdoc --main d\_heap.rb} kansiossa  \emph{heaps/Heap/src/}.

\end{document}
